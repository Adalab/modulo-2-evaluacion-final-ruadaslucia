"use strict";let favorites=localStorage.getItem("favorites");const favoriteList=document.querySelector(".js-favorites"),inputSearch=document.querySelector(".js-input"),buttonSearch=document.querySelector(".js-button-search"),drinkList=document.querySelector(".js-drinkList"),buttonReset=document.querySelector(".js-button-reset");if(null===favorites)favorites=[];else{favorites=JSON.parse(favorites);for(const e of favorites){let t=createLiFavoriteElement(e);favoriteList.appendChild(t)}}function handleClickBtnSearch(e){drinkList.innerHTML="",e.preventDefault();let t=inputSearch.value;fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+t).then(e=>e.json()).then(e=>{for(const t of e.drinks){let e=createBaseLiDrink(t),n=document.createElement("button");n.innerText="fav",e.appendChild(n),n.addEventListener("click",()=>{addDrinkToFavorites(t,e)}),existsInFavorites(t)?removeFavButttonAndChangeColors(e):e.classList.add("regularItem"),drinkList.appendChild(e)}})}function existsInFavorites(e){for(const t of favorites)if(e.idDrink===t.idDrink)return!0;return!1}function createBaseLiDrink(e){let t=document.createElement("li"),n=document.createElement("img");n.setAttribute("src",e.strDrinkThumb),t.appendChild(n);let r=document.createElement("p");return r.innerText=e.strDrink,t.appendChild(r),t}function addDrinkToFavorites(e,t){removeFavButttonAndChangeColors(t);let n=createLiFavoriteElement(e);favoriteList.appendChild(n),favorites.push(e),addToLocalStorage(favorites)}function createLiFavoriteElement(e){let t=createBaseLiDrink(e),n=document.createElement("button");return n.innerText="-",t.appendChild(n),n.addEventListener("click",()=>{(t.contains=n)&&(t="")}),t}function addToLocalStorage(e){localStorage.setItem("favorites",JSON.stringify(e))}function removeFavButttonAndChangeColors(e){e.querySelector("button").classList.add("notDisplay"),e.classList.add("clickedFavorites"),e.classList.remove("regularItem")}function handleClickButtonReset(){favorites=[],favoriteList.innerHTML="",localStorage.removeItem("favorites"),inputSearch.value=""}buttonSearch.addEventListener("click",handleClickBtnSearch),buttonReset.addEventListener("click",handleClickButtonReset);